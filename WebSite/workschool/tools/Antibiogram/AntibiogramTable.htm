<html>
<head>
<title>Interactive Antibiogram</title>

<!--
Interactive Antibiogram
Jonathan H. Chen
jonc101 at gmail.com
jonc101 at stanford.edu
2012

/**
 * Copyright 2012, Jonathan H. Chen (jonc101 at gmail.com / jonc101 at stanford.edu)
 *
 * See linked data file for additional data source references
 *
 */
-->

<link rel="stylesheet" type="text/css" href="antibiogramStyles.css">

<SCRIPT LANGUAGE="JavaScript" SRC="../lib/toolkit.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript" SRC="../lib/Color.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript" SRC="antibiogramData.js"></SCRIPT>

<SCRIPT LANGUAGE="JavaScript" SRC="antibiogramControls.js"></SCRIPT>

</head>
<body onLoad="initialize(document.forms[0]);" topmargin=0 leftmargin=0>

<form name="analysisForm" onSubmit="return false;">
    <input type=hidden name="summary" value="">

    <div align=center>

    <table border=0 cellpadding=2 cellspacing=2>
        <tr>
            <td class="instructionCell" align=center><b><i>Step 1</i></b><br>Select Antibiogram</td>
            <td colspan=6 align=center class="headerRow">
                <select onChange="loadSensitivityData(this.form.dataLoad, this.options[this.selectedIndex].value);" class="headerRow" style="font-size: 16pt; border: solid black 0px;">
                    <option value="default">Default Antibiogram (Sanford Guide 2010)
                    <option value="Stanford2011">Stanford (SUH) 2011
                    <option value="PAVA2011-ED">Palo Alto VA (PAVA) 2011 - Emergency Department
                </select>
            </td>
        </tr>
        <tr>
            <th class="instructionCell"><i>Step 2</i></th>
            <th colspan=3 class="headerCol">Organism</th>
            <th colspan=3 class="headerCol">Antimicrobial</th>
        </tr>
        <tr>
            <td class="instructionCell" align=center>
                Select Organism Groups of Interest
                <br><br>
                (Optional)<br>
                Select Antimicrobial Subsets, e.g., "Oral Available"
            </td>
            <td colspan=3 align=center>
                <table border=0 width=100%>
                    <tr valign=top>
                        <td>
                            <script language="JavaScript">
                            for( var i=0; i < BUG_PROPERTY_LIST.length/2; i++ )
                            {
                                var bugProp = BUG_PROPERTY_LIST[i];
                                document.writeln('<input type=checkbox name="bugProp" onClick="updateBugList(this.form)" value="'+bugProp+'"><a href="javascript:toggleBugProp(\''+bugProp+'\')">'+bugProp+'</a><br>');
                            }
                            </script>
                        </td>
                        <td>
                            <script language="JavaScript">
                            for( var i=Math.ceil(BUG_PROPERTY_LIST.length/2); i < BUG_PROPERTY_LIST.length; i++ )
                            {
                                var bugProp = BUG_PROPERTY_LIST[i];
                                document.writeln('<input type=checkbox name="bugProp" onClick="updateBugList(this.form)" value="'+bugProp+'"><a href="javascript:toggleBugProp(\''+bugProp+'\')">'+bugProp+'</a><br>');
                            }
                            </script>
                        </td>
                    </tr>
                </table>
            </td>
            <td colspan=3>
                <table border=0 width=100%>
                    <tr valign=top>
                        <td>
                            <script language="JavaScript">
                            for( var i=0; i < DRUG_CLASS_LIST.length/2; i++ )
                            {
                                var drugProp = DRUG_CLASS_LIST[i];
                                document.writeln('<input type=checkbox name="drugProp" onClick="updateDrugList(this.form)" value="'+drugProp+'"><a href="javascript:toggleDrugProp(\''+drugProp+'\')">'+drugProp+'</a><br>');
                            }
                            </script>
                        </td>
                        <td>
                            <script language="JavaScript">
                            for( var i=Math.ceil(DRUG_CLASS_LIST.length/2); i < DRUG_CLASS_LIST.length; i++ )
                            {
                                var drugProp = DRUG_CLASS_LIST[i];
                                document.writeln('<input type=checkbox name="drugProp" onClick="updateDrugList(this.form)" value="'+drugProp+'"><a href="javascript:toggleDrugProp(\''+drugProp+'\')">'+drugProp+'</a><br>');
                            }
                            </script>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <th class="instructionCell"><i>Step 3</i></th>

            <td class="headerCol" align=center><a href="javascript:selectAllList(document.forms[0].bugAvailable, true)">Available</a></td>
            <td class="headerCol">&nbsp;</td>
            <td class="headerCol" align=center><a href="javascript:selectAllList(document.forms[0].bugSelected, true)">Selected</a> <a href="javascript:clearSelectedBugs();">(Clear)</a></td>

            <td class="headerCol" align=center><a href="javascript:selectAllList(document.forms[0].drugAvailable, true)">Available</a></td>
            <td class="headerCol">&nbsp;</td>
            <td class="headerCol" align=center><a href="javascript:selectAllList(document.forms[0].drugSelected, true)">Selected</a> <a href="javascript:clearSelectedDrugs();">(Clear)</a></td>
        </tr>
        <tr valign=middle>
            <td class="instructionCell" align=center>
                (Optional)<br>
                Customize List of Selected Organisms and Antimicrobials
            </td>

            <td align=center>
                <select name="bugAvailable" multiple size=10 style="width: 280;" onDblClick="selectMoveCopy( this, this.form.bugSelected, true )">
                </select>
            </td>
            <td align=center>
                <input type=button value="(+)" class="iconButton" onClick="selectMoveCopy( this.form.bugAvailable, this.form.bugSelected, true )">
                <br><br>
                <input type=button value="(-)" class="iconButton" onClick="selectMoveCopy( this.form.bugSelected, null, false )">
            </td>
            <td align=center>
                <select name="bugSelected" multiple size=10 style="width: 150;" onDblClick="selectMoveCopy( this, null, false )">
                </select>
            </td>

            <td align=center>
                <select name="drugAvailable" multiple size=10 style="width: 280;" onDblClick="selectMoveCopy( this, this.form.drugSelected, true )">
                </select>
            </td>
            <td align=center>
                <input type=button value="(+)" class="iconButton" onClick="selectMoveCopy( this.form.drugAvailable, this.form.drugSelected, true )">
                <br><br>
                <input type=button value="(-)" class="iconButton" onClick="selectMoveCopy( this.form.drugSelected, null, false )">
            </td>
            <td align=center>
                <select name="drugSelected" multiple size=10 style="width: 150;" onDblClick="selectMoveCopy( this, null, false )">
                </select>
            </td>
        </tr>
        <tr>
            <td class="instructionCell" align=center><b><i>Step 4</i></b><br>Generate Table</td>
            <td colspan=6 align=center class="headerRow">
                <input type=submit value="Generate Sensitivity Table" onClick="doAnalysis(this.form);" tabindex=500 style="font-size: 16pt;">
            </td>
        </tr>
    </table>

    <div id="sensitivityTableSpace">
    </div>

    <br><br>

    <table border=0 cellpadding=2 cellspacing=2>
        <tr valign=top>
            <td align=center width=50%>
                <textarea name="feedback" rows=10 cols=80 wrap="off"></textarea>
                <br>
                <i>Debug Feedback Area</i>
            </td>
            <td align=center width=50%>
                <textarea name="dataLoad" rows=10 cols=80 wrap="off"></textarea>
                <input type=button onClick="submitSensitivityData(this.form.dataLoad);" value="Add Custom Sensitivity Data">
            </td>
        </tr>
    </table>

    </div>
</form>
</body>
</html>